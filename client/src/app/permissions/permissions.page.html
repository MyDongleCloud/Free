<div class="flex bg-sidebar text-sidebar-foreground h-screen">
	<app-sidebar></app-sidebar>
	<div class="flex-1 flex flex-col bg-white overflow-x-auto">
		<app-topbar title="{{global.mytranslate('Permissions')}}"></app-topbar>
		<div class="flex gap-3 mt-4 mr-4">
			<div class="ml-4 relative">
				<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
					<ion-icon name="search-outline" class="w-5 h-5"></ion-icon>
				</div>
				<input type="text" [(ngModel)]="searchTerm" (input)="filterCards()" placeholder="Find modules..." class="w-full pl-10 pr-4 py-2 border border-gray-300 text-gray-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent transition-colors">
			</div>
			<div class="flex-1"></div>
			<button (click)="getData()" [disabled]="dResetSave" class="inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors cursor-pointer disabled:bg-gray-100 disabled:cursor-default disabled:text-gray-400">
				<ion-icon name="refresh-outline" class="w-4 h-4"></ion-icon>
				Reset
			</button>
			<button (click)="save()" [disabled]="dResetSave" class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600 border border-gray-300 rounded-lg text-sm font-medium text-white hover:bg-blue-700 transition-colors cursor-pointer disabled:bg-gray-100 disabled:cursor-default disabled:text-gray-400">
				<ion-icon name="save-outline" class="w-4 h-4"></ion-icon>
				Save
			</button>
		</div>
		<div class="m-4 overflow-y-auto shadow md:rounded-lg flex-1">
			<table class="min-w-full divide-y divide-gray-300">
				<thead class="bg-gray-50 sticky top-0 z-10">
					<tr>
						<th scope="col" class="px-6 py-3 text-start text-xs hidden md:table-cell font-medium text-gray-500 tracking-wider">TITLE<ion-icon class="w-5 h-5 ml-2" (click)="toggleSortDirection('title')" [name]="sortDirection['title'] == 'asc' ? 'caret-up-outline' : 'caret-down-outline'"></ion-icon></th>
						<th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 tracking-wider">OPEN SOURCE<ion-icon class="w-5 h-5 ml-2" (click)="toggleSortDirection('name')" [name]="sortDirection['name'] == 'asc' ? 'caret-up-outline' : 'caret-down-outline'"></ion-icon></th>
						<th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 tracking-wider">DISABLED</th>
						<th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 tracking-wider">PUBLIC</th>
						<th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 tracking-wider">LOCAL<br>NETWORK</th>
						<th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 tracking-wider">GROUP<br>ADMIN</th>
						<th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 tracking-wider">GROUP<br>USER</th>
						<th scope="col" class="px-6 py-3 text-start text-xs hidden xl:table-cell font-medium text-gray-500 tracking-wider">DESCRIPTION</th>
					</tr>
				</thead>
				<tbody class="bg-white divide-y divide-gray-200">
					<tr class="hover:bg-gray-50" *ngFor="let card of filteredCards; let cc = index;">
						<td class="px-6 py-4 whitespace-nowrap hidden md:table-cell">
							<div class="text-sm font-medium text-gray-900"><a href="{{card.link}}" title="{{card.title}}" target="_blank" style="color:var(--ion-color-secondary);">{{card.title}}</a></div>
						</td>
						<td class="px-6 py-4 whitespace-nowrap">
							<div class="text-sm font-medium text-gray-900"><a href="https://github.com/{{card.github}}" target="_blank" style="color:black">{{card.name}}</a></div>
						</td>
						<td class="px-6 py-4 whitespace-nowrap">
							<div class="text-sm font-medium text-gray-900 flex justify-center"><ion-checkbox [(ngModel)]="card['bDisabled']" [disabled]="card['dDisabled']" (ionChange)="update(card)"></ion-checkbox></div>
						</td>
						<td class="px-6 py-4 whitespace-nowrap">
							<div class="text-sm font-medium text-gray-900 flex justify-center"><ion-checkbox [(ngModel)]="card['bPublic']" [disabled]="card['dPublic']" (ionChange)="update(card)" style="{{'display:' + (card['dPublic'] ? 'none' : 'block')}}"></ion-checkbox></div>
						</td>
						<td class="px-6 py-4 whitespace-nowrap">
							<div class="text-sm font-medium text-gray-900 flex justify-center"><ion-checkbox [(ngModel)]="card['bLocal']" [disabled]="card['dLocal']" (ionChange)="update(card)" style="{{'display:' + (card['dLocal'] ? 'none' : 'block')}}"></ion-checkbox></div>
						</td>
						<td class="px-6 py-4 whitespace-nowrap">
							<div class="text-sm font-medium text-gray-900 flex justify-center"><ion-checkbox [(ngModel)]="card['bAdmin']" [disabled]="card['dAdmin']" (ionChange)="update(card)" style="{{'display:' + (card['dAdmin'] ? 'none' : 'block')}}"></ion-checkbox></div>
						</td>
						<td class="px-6 py-4 whitespace-nowrap">
							<div class="text-sm font-medium text-gray-900 flex justify-center"><ion-checkbox [(ngModel)]="card['bUser']" [disabled]="card['dUser']" (ionChange)="update(card)" style="{{'display:' + (card['dUser'] ? 'none' : 'block')}}"></ion-checkbox></div>
						</td>
						<td class="px-6 py-4 whitespace-nowrap hidden xl:table-cell">
							<div class="text-sm font-medium text-gray-900 max-w-xs truncate"><span>{{card.description}}</span></div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
