<ion-header>
	<ion-toolbar>
		<ion-buttons slot="start">
			<ion-back-button></ion-back-button>
		</ion-buttons>
		<ion-title>{{global.mytranslate("What do you want to do?")}}</ion-title>
	</ion-toolbar>
</ion-header>
<ion-content [fullscreen]="true">
<ion-searchbar [(ngModel)]="searchTerm" (input)="filterCards()" placeholder="Search modules..."></ion-searchbar>
<div style="margin-left:5px; display:flex; align-items:center;">
	<ion-segment [(ngModel)]="category" [scrollable]="true" (ionChange)="filterCards()" style="margin-right:20px; border:0px solid gray; margin-top:10px; border-radius:5px; box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);">
		<ion-segment-button value="All" style="width:100%;">
			<ion-label style="padding-bottom:0px;">All</ion-label>
			<ion-icon name="apps-outline" size="small"></ion-icon>
		</ion-segment-button>
		<ion-segment-button value="Essential" style="width:100%;">
			<ion-label style="padding-bottom:0px;">Essential</ion-label>
			<ion-icon name="star-outline" size="small"></ion-icon>
		</ion-segment-button>
		<ion-segment-button value="Personal" style="width:100%;">
			<ion-label style="padding-bottom:0px;">Personal</ion-label>
			<ion-icon name="person-outline" size="small"></ion-icon>
		</ion-segment-button>
		<ion-segment-button value="Productivity" style="width:100%;">
			<ion-label style="padding-bottom:0px;">Productivity</ion-label>
			<ion-icon name="attach-outline" size="small"></ion-icon>
		</ion-segment-button>
		<ion-segment-button value="Utils" style="width:100%;">
			<ion-label style="padding-bottom:0px;">Utils</ion-label>
			<ion-icon name="hammer-outline" size="small"></ion-icon>
		</ion-segment-button>
		<ion-segment-button value="Developer" style="width:100%;">
			<ion-label style="padding-bottom:0px;">Developer</ion-label>
			<ion-icon name="code-slash-outline" size="small"></ion-icon>
		</ion-segment-button>
	</ion-segment>
	<ion-segment [(ngModel)]="presentation" [scrollable]="true" style="border:0px solid gray; margin-top:10px; border-radius:5px; box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);">
		<ion-segment-button value="cards" style="width:100%;">
			<ion-label style="padding-bottom:0px;">Cards</ion-label>
			<ion-icon name="apps-outline" size="small"></ion-icon>
		</ion-segment-button>
		<ion-segment-button value="table" style="width:100%;">
			<ion-label style="padding-bottom:0px;">Table</ion-label>
			<ion-icon name="list" size="small"></ion-icon>
		</ion-segment-button>
	</ion-segment>
	<ion-icon size="small" (click)="toggleSortDirection('title')" style="margin-left:20px;" [name]="sortDirection == 'asc' ? 'caret-up-outline' : 'caret-down-outline'"></ion-icon>
</div>
<ion-grid *ngIf="presentation == 'cards'">
	<ion-row>
		<ion-col size="12" size-md="3" *ngFor="let card of filteredCards">
			<ion-card style="max-width:400px; background-color:{{card.enabled == false ? 'rgb(247, 222, 222)' : card.permissions[0] != '_public_' ? 'rgb(247, 247, 222)' : 'rgb(222, 247, 222)'}}">
				<ion-card-header>
					<ion-fab style="position:absolute; right:4px; display:flex; align-items:flex-end; flex-direction:column;">
							<div style="display:flex; align-items:center;margin-bottom:7px;">
								<a href="javascript:void()" *ngIf="card.enabled == false" title="Disabled module"><ion-icon name="cloud-offline-outline" size="large" style="color:var(--ion-color-danger); margin-right:4px;"></ion-icon></a>
								<ion-icon name="settings-outline" size="large" (click)="settings(card.module)" style="color:var(--ion-color-secondary); cursor:pointer;"></ion-icon>
							</div>
							<ion-chip style="cursor:pointer; padding-top:0px; padding-bottom:0px; border-radius:5px; border:1px solid var(--ion-color-secondary); background-color:transparent;" (click)="filterCategory(card.category)">{{card.category}}</ion-chip>
							<div style="margin-top:3px; display:flex; align-items:center;" *ngIf="card.github != ''">
								<a href="https://github.com/{{card.github}}" title="GitHub {{card.name}}" target="_blank"><ion-icon name="logo-github" size="large" style="margin-right:4px; color:var(--ion-color-secondary);" *ngIf="card.stars != 0"></ion-icon></a>
								<div style="display:flex; flex-direction:column; align-items:center;"><ion-icon name="star-outline" size="small" style="color:var(--ion-color-warning);" *ngIf="card.stars != 0"></ion-icon><span>{{approximateStars(card.stars)}}k</span></div>
							</div>
					</ion-fab>
					<ion-card-title style="display:flex; align-items:center;">
						<a href="{{card.link}}" title="{{card.title}}" target="_blank"><img src="assets/icon/{{card.module}}.png" style="width:64px; height:64px; float:left; margin-right:15px;"></a>
						<a href="{{card.link}}" title="{{card.title}}" target="_blank" style="color:var(--ion-color-secondary);">{{card.title}}</a>
					</ion-card-title>
					<ion-card-subtitle>
						<i>Project: {{card.name}}</i><br>
						Perms: <ion-chip *ngFor="let pm of card.permissions" style="cursor:default; padding-top:0px; padding-bottom:0px; border-radius:5px; border:1px solid gray; background-color:transparent;">{{pm}}</ion-chip>
					</ion-card-subtitle>
				</ion-card-header>
				<ion-card-content>
					<p style="color:black;">{{card.description}}</p>
					Keywords: <ion-chip *ngFor="let kw of card.keywords" style="cursor:default; padding-top:0px; padding-bottom:0px; border-radius:5px; border:1px solid gray; background-color:transparent;">{{kw}}</ion-chip>
				</ion-card-content>
			</ion-card>
		</ion-col>
	</ion-row>
</ion-grid>
<ion-list *ngIf="presentation == 'table'">
	<ion-item-divider>
	<ion-label style="flex:1;">Title <ion-icon size="small" (click)="toggleSortDirection('title')" style="margin-left:20px;" [name]="sortDirection == 'asc' ? 'caret-up-outline' : 'caret-down-outline'"></ion-icon></ion-label>
	<ion-label style="flex:1;">Permissions</ion-label>
	<ion-label style="flex:1;">Category <ion-icon *ngIf="category == 'All'" size="small" (click)="toggleSortDirection('category')" style="margin-left:20px;" [name]="sortDirection == 'asc' ? 'caret-up-outline' : 'caret-down-outline'"></ion-icon></ion-label>
	<ion-label style="flex:3;">Description</ion-label>
	<ion-label style="flex:2;">Keywords</ion-label>
	<ion-label style="flex:1;">Project</ion-label>
	<ion-label style="flex:1;"></ion-label>
	</ion-item-divider>
	<ion-item *ngFor="let card of filteredCards">
		<ion-label style="flex:1;"><a href="{{card.link}}" title="{{card.title}}" target="_blank" style="color:var(--ion-color-secondary);">{{card.title}}</a></ion-label>
		<ion-label style="flex:1;"><ion-chip *ngFor="let pm of card.permissions" style="cursor:default; padding-top:0px; padding-bottom:0px; border-radius:5px; border:1px solid gray; background-color:transparent;">{{pm}}</ion-chip></ion-label>
		<ion-label style="flex:1;"><ion-chip style="cursor:pointer; padding-top:0px; padding-bottom:0px; border-radius:5px; border:1px solid var(--ion-color-secondary); background-color:transparent;" (click)="filterCategory(card.category)">{{card.category}}</ion-chip></ion-label>
		<ion-label style="flex:3;">{{card.description}}</ion-label>
		<ion-label style="flex:2;"><ion-chip *ngFor="let kw of card.keywords" style="cursor:default; padding-top:0px; padding-bottom:0px; border-radius:5px; border:1px solid gray; background-color:transparent;">{{kw}}</ion-chip></ion-label>
		<ion-label style="flex:1;"><a href="https://github.com/{{card.github}}" target="_blank" style="color:black">{{card.name}}</a></ion-label>
		<ion-label style="flex:1;"><ion-icon name="settings-outline" (click)="settings(card.module)" style="color:var(--ion-color-secondary); cursor:pointer;"></ion-icon></ion-label>
	</ion-item>
</ion-list>

<ion-modal #modalModuleSettings class="modalLimitSize">
	<ng-template>
		<ion-content class="ion-padding">
			<h3 style="text-align:center; background-color:#3880ff; color:white; padding-top:5px; padding-bottom:5px;" (click)="closeModuleSettings()">Settings of {{cards[findIdByModule(moduleCur)].title}}&nbsp;<ion-icon name="close-circle-outline" style="margin-left:10px; width:24px; height:24px;" style="cursor:pointer;"></ion-icon></h3>
			<div>
				<br>
				<span style="color:black;">{{cards[findIdByModule(moduleCur)].description}}</span><br><br>
				Category: <ion-chip style="cursor:pointer; padding-top:0px; padding-bottom:0px; border-radius:5px; border:1px solid var(--ion-color-secondary); background-color:transparent;">{{cards[findIdByModule(moduleCur)].category}}</ion-chip><br><br>
				<a href="{{cards[findIdByModule(moduleCur)].link}}" title="{{cards[findIdByModule(moduleCur)].link}}" target="_blank" style="color:var(--ion-color-secondary);">{{cards[findIdByModule(moduleCur)].link}}</a><br><br>
				<div *ngIf="cards[findIdByModule(moduleCur)].github != ''">
					<i>Project: {{cards[findIdByModule(moduleCur)].name}}</i>&nbsp;&nbsp;<a href="https://github.com/{{cards[findIdByModule(moduleCur)].github}}" title="GitHub {{cards[findIdByModule(moduleCur)].name}}" target="_blank"><ion-icon name="logo-github" size="large" style="margin-right:4px; color:var(--ion-color-secondary);" *ngIf="cards[findIdByModule(moduleCur)].stars != 0"></ion-icon></a> <ion-icon name="star-outline" size="small" style="color:var(--ion-color-warning);" *ngIf="cards[findIdByModule(moduleCur)].stars != 0"></ion-icon><span>{{approximateStars(cards[findIdByModule(moduleCur)].stars)}}k</span>
				</div>
				Perms: <ion-chip *ngFor="let pm of cards[findIdByModule(moduleCur)].permissions" style="cursor:default; padding-top:0px; padding-bottom:0px; border-radius:5px; border:1px solid gray; background-color:transparent;">{{pm}}</ion-chip><br><br>
				Keywords: <ion-chip *ngFor="let kw of cards[findIdByModule(moduleCur)].keywords" style="cursor:default; padding-top:0px; padding-bottom:0px; border-radius:5px; border:1px solid gray; background-color:transparent;">{{kw}}</ion-chip>
			</div>
		</ion-content>
	</ng-template>
</ion-modal>

</ion-content>
