<ion-content>
<div [style]="!ready ? 'display:flex;' : 'display:none;'" class="min-h-screen flex items-center justify-center bg-gradient-to-br from--gray-50 via--white to--blue-50">
	<img src="assets/loading.gif" style="width:10%; height:10%; max-width:64px; max-height:64px;">
</div>
<div [style]="ready ? 'display:flex;' : 'display:none;'" class="min-h-screen flex items-center justify-center bg-gradient-to-br from--gray-50 via--white to--blue-50 py-12 px-4 sm:px-6 lg:px-8">
	<div class="max-w-md w-full">
		<div class="bg--white rounded-2xl shadow-xl border border--gray-100 p-8">
			<div class="text-center mb-8 flex items-center flex-col">
				<h1 class="flex flex-row items-center text-lg -mt-2 mb-4 font-bold"><img src="assets/mydonglecloud.png" class="w-10 h-10 mr-2 cursor-pointer" (click)="global.openPage('');"/> <span class="text--blue-600">{{L("My")}}</span><span style class="text--blue-200">Dongle.</span><span class="text--blue-600">Cloud</span></h1>
				<div class="flex items-center gap-2 mb-2">
					<div class="bg--blue-600 w-16 h-16 rounded-2xl flex items-center justify-center mx-auto">
						<ion-icon name="person-outline" class="text--white w-10 h-10"></ion-icon>
					</div>
					<h1 class="text-3xl font-bold text-left text--gray-900">{{L("Find")}}<br>{{L("Dongle")}}</h1>
				</div>
				<p class="text--gray-600">{{L("Find and go to your dongle")}}</p>
			</div>
			<form [formGroup]="formFind" (ngSubmit)="doFind();" class="space-y-6">
				<div>
					<label for="email1" class="block text-sm font-medium text--gray-700 mb-2">{{L("Email address")}}</label>
					<div class="relative">
						<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
							<ion-icon name="at-outline" class="text--gray-500 w-4 h-4"></ion-icon>
						</div>
						<input id="email1" (blur)="handleBlur($event, email1)" type="email" formControlName="email1" autocomplete="email" required class="block w-full pl-10 pr-3 py-3 border border--gray-300 rounded-xl placeholder--gray-400 focus:outline-none focus:ring-2 focus:ring--blue-700 focus:border-transparent transition-colors duration-200 text--gray-900" placeholder="Enter your email" [class.border--red-300]="email1?.invalid && email1?.touched" [class.focus:ring--red-500]="email1?.invalid && email1?.touched">
					</div>
					@if (email1?.invalid && email1?.touched) {
					<div class="flex items-center gap-1 text--red-500 text-sm mt-2">
						<ion-icon name="alert-circle-outline" class="text--red-500 w-5 h-5"></ion-icon>
						{{L("Please enter a valid email address")}}
					</div>
					}
				</div>
				@if (errorSt) {
				<div class="bg--red-50 border border--red-200 rounded-xl p-4">
					<div class="flex items-center gap-2">
						<ion-icon name="alert-circle-outline" class="text--red-500 w-5 h-5"></ion-icon>
						<span class="text--red-800 text-sm font-medium">{{ errorSt }}</span>
					</div>
				</div>
				}
				<button type="submit" (click)="doFind()" id="submit1" [disabled]="progress || formFind.invalid" class="w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-xl text-sm font-semibold text--white bg--blue-600 hover:bg--blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring--blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 text--gray-900 transform hover:scale-[1.02]">
					@if (progress) {
					<ion-icon name="cog-outline" class="animate-spin text--white w-6 h-6"></ion-icon>
					{{L("Finding...")}}
					} @else {
					<ion-icon name="log-in-outline" class="text--white w-6 h-6"></ion-icon>
					{{L("Find")}}
					}
				</button>
			</form>
			<div class="mt-8 text-center">
				<p class="text-sm text--gray-600">{{L("Have a new dongle?")}} <a class="font-semibold text--blue-600 hover:text--blue-700 transition-colors" (click)="global.openPage('setup')" style="cursor:pointer;">{{L("Setup here!")}}</a>
				</p>
			</div>
		</div>
	</div>
</div>
</ion-content>
