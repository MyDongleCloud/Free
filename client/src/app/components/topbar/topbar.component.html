<div class="flex items-center justify-between h-16 px-6 border-b border-sidebar-border">
	<div class="flex items-center space-x-2 text-sm ml-4 md:ml-0">
		@if (title.startsWith("Wrapper: ")) {
		<a routerLink="/" class="text--gray-700 text-lg hover:text--gray-900 transition-colors font-medium cursor-pointer">{{LG("Dashboard")}}</a>
		<ion-icon name="chevron-forward-outline" class="w-4 h-4 text--gray-700"></ion-icon>
		<span class="text--gray-700 font-medium text-lg">
			{{title.replace("Wrapper: ", "")}}
			<ion-icon (click)="extract();" name="open-outline" class="ml-2 h-5 w-5 cursor-pointer"></ion-icon>
		</span>
		} @else {
		<span class="text--gray-700 text-lg hover:text--gray-900 transition-colors font-medium">{{title}}</span>
		}
	</div>
	<div joyrideStep="anchor10" title="Profile" text="Access your profile settings including enabling 2FA." stepPosition="bottom" class="flex items-center gap-4 -mr-4 md:-mr-2">
		<div class="relative">
			<button (click)="toggleUserMenu()" class="flex items-center gap-3 p-2 rounded-lg hover:bg--gray-100 transition-colors user-menu-button" aria-label="User menu">
				<div class="w-8 h-8 bg--blue-600 rounded-full flex items-center justify-center cursor-pointer">
					<span class="text-sm font-medium text--white">{{initials}}</span>
				</div>
				<div class="hidden md:block text-left cursor-pointer">
					<p class="text-sm font-medium text--gray-900">{{global.session?.user?.name}} <span class="inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium ml-1 mr-1" [class]="global.colorWord(global.session?.user?.role)">{{global.session?.user?.role}}</span></p>
					<p class="text-xs text--gray-500">{{global.session?.user?.email}}</p>
				</div>
				<ion-icon name="chevron-down-outline" class="h-4 w-4 text--gray-400 cursor-pointer"></ion-icon>
			</button>
			@if (showUserMenu) {
			<div class="absolute bg--main right-0 mt-2 w-56 rounded-lg shadow-lg border border--gray-200 z-50 user-menu-dropdown">
				<div class="p-4 border-b border--gray-200 md:hidden">
					<p class="text-sm font-medium text--gray-900">{{global.session?.user?.name}}</p>
					<p class="text-sm text--gray-500">{{global.session?.user?.email}}</p>
				</div>
				<div class="px-4 py-2">
					<a routerLink="/" class="flex items-center gap-3 py-2 text-sm text--gray-700 hover:bg--gray-100 transition-colors cursor-pointer">
						<ion-icon name="apps-outline" class="h-4 w-4"></ion-icon>
						{{LG("Dashboard")}}
					</a>
					<a routerLink="/profile" class="flex items-center gap-3 py-2 text-sm text--gray-700 hover:bg--gray-100 transition-colors cursor-pointer">
						<ion-icon name="person-outline" class="h-4 w-4"></ion-icon>
						{{LG("Profile")}}
					</a>
					<a routerLink="/help" class="flex items-center gap-3 py-2 text-sm text--gray-700 hover:bg--gray-100 transition-colors cursor-pointer">
						<ion-icon name="help-outline" class="h-4 w-4"></ion-icon>
						{{LG("Help")}}
					</a>
					<a routerLink="/about" class="flex items-center gap-3 py-2 text-sm text--gray-700 hover:bg--gray-100 transition-colors cursor-pointer">
						<ion-icon name="information-outline" class="h-4 w-4"></ion-icon>
						{{LG("About")}}
					</a>
				</div>
				<div class="border-t border--gray-200 flex gap-3 px-4 py-2 pb-1 text--gray-900">
					<a (click)="global.themeSet('light')" title="{{LG('Light')}}" [class]="global.themeSel == 'light' ? 'cursor-default' : 'cursor-pointer'"><ion-icon name="sunny-outline" class="h-4 w-4 pb-1" [class]="global.themeSel == 'light' ? 'border-b border--gray-900' : ''"></ion-icon></a>
					<a (click)="global.themeSet('dark')" title="{{LG('Dark')}}" [class]="global.themeSel == 'dark' ? 'cursor-default' : 'cursor-pointer'"><ion-icon name="moon-outline" class="h-4 w-4 pb-1" [class]="global.themeSel == 'dark' ? 'border-b border--gray-900' : ''"></ion-icon></a>
					<a (click)="global.themeSet('system')" title="{{LG('System')}}" [class]="global.themeSel == 'system' ? 'cursor-default' : 'cursor-pointer'"><ion-icon name="contrast-outline" class="h-4 w-4 pb-1" [class]="global.themeSel == 'system' ? 'border-b border--gray-900' : ''"></ion-icon></a>
					<div class="ml-3 -mt-1 flex gap-3" [class]="global.demo ? '' : 'hidden'">
						<a (click)="global.changeLanguage('en');" title="en" [class]="global.settings.lang == 'en' ? 'cursor-default' : 'cursor-pointer'"><span [class]="global.settings.lang == 'en' ? 'border-b border--gray-900' : ''">ðŸ‡ºðŸ‡¸</span></a>
						<a (click)="global.changeLanguage('fr');" title="fr" [class]="global.settings.lang == 'fr' ? 'cursor-default' : 'cursor-pointer'"><span [class]="global.settings.lang == 'fr' ? 'border-b border--gray-900' : ''">ðŸ‡«ðŸ‡·</span></a></div>
					</div>
				<div class="border-t border--gray-200 px-4 py-2">
					<button (click)="global.logoutRedirect();" class="flex items-center gap-3 py-2 text-sm text--red-600 hover:bg--red-50 transition-colors w-full text-left cursor-pointer">
						<ion-icon name="log-out-outline" class="h-4 w-4"></ion-icon>
						{{LG("Log out")}}
					</button>
				</div>
			</div>
			}
		</div>
	</div>
</div>
<div class="flex flex-col mt-4 p-4 w-full" *ngIf="global.setupUIProgress > 0">
	<div class="flex items-center justify-between">
		<span class="text--red-500 font-bold">{{LG("First-time modules setup is under progress...")}} ({{global.setupUIDesc}})</span>
		<div class="flex items-center gap-1">
			<div class="w-2 h-2 rounded-full"></div>
			<span class="ml-auto text--red-500 font-bold px-2 py-0.5 rounded-full">{{global.setupUIProgress}}%</span>
		</div>
	</div>
	<div class="mt-2 w-full bg--gray-200 font-bold rounded-full h-1 flex">
		<div class="h-1 rounded-full bg--red-500 font-bold" style="width:{{global.setupUIProgress}}%"></div>
	</div>
</div>
